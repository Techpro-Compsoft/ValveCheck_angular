<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Operator Block Timings
    </ion-title>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>


<ion-content>
  <ion-item>
    <ion-label>Start time</ion-label>
    <ion-datetime displayFormat="h:mm a" [(ngModel)]="startTime"></ion-datetime>
  </ion-item>

  <ion-item>
    <ion-label>Stop time</ion-label>
    <ion-datetime displayFormat="h:mm a" [(ngModel)]="stopTime"></ion-datetime>
  </ion-item>

  <div style="text-align: center;margin-top: 10px;">


    <ion-button *ngIf="valveDetails?.instruction && !valveDetails?.actual_start_time" size="small" fill="clear"
      (click)="startValve(1)">Start
      Valve</ion-button>

    <ion-button *ngIf="valveDetails?.instruction && valveDetails?.actual_start_time && !valveDetails?.actual_stop_time"
      size="small" fill="clear" (click)="stopValve(2)">Stop
      Valve</ion-button>

    <ion-button *ngIf="valveDetails?.instruction && valveDetails?.actual_start_time && !valveDetails?.actual_stop_time"
      size="small" fill="clear" (click)="confirmReport(3)">Report</ion-button>

    <ion-button *ngIf="valveDetails?.interruption_reason && !valveDetails?.interruption_resume" size="small"
      fill="clear" color="secondary" (click)="resumeValve(4)">Resume Valve
    </ion-button>

    <ion-button
      *ngIf="valveDetails?.interruption_reason && valveDetails?.interruption_resume && !valveDetails?.interruption_stop"
      size="small" fill="clear" (click)="stopValve(2)">Stop Valve
    </ion-button>
  </div>

  <ion-card *ngIf="valveDetails?.instruction_start_time" style="margin-top: 10px;">
    <!-- <div style="text-align: center;">
      <ion-label>Valve Details</ion-label>
    </div> -->
    <ion-card-header>
      <ion-card-title>Valve Details</ion-card-title>
    </ion-card-header>

    <ion-item lines="none">
      <ion-label>Started at:</ion-label>
      <ion-input type="text" [value]="valveDetails?.actual_start_time ? valveDetails?.actual_start_time : '-'" readonly>
      </ion-input>
    </ion-item>
    <ion-item lines="none">
      <ion-label>Stopped at:</ion-label>
      <ion-input type="text" [value]="valveDetails?.actual_stop_time ? valveDetails?.actual_stop_time : '-'" readonly>
      </ion-input>
    </ion-item>

    <ion-item *ngIf="valveDetails?.interruption_reason" lines="none">
      <ion-label>Interruption Reason:</ion-label>
      <ion-input type="text" readonly [value]="valveDetails?.interruption_reason | titlecase"></ion-input>
    </ion-item>

    <ion-item *ngIf="valveDetails?.interruption_reason" lines="none">
      <ion-label>Resumed at:</ion-label>
      <ion-input type="text" [value]="valveDetails?.interruption_resume ? valveDetails?.interruption_resume : '-'"
        readonly>
      </ion-input>
    </ion-item>

    <ion-item *ngIf="valveDetails?.interruption_reason" lines="none">
      <ion-label>Stopped at:</ion-label>
      <ion-input type="text" [value]="valveDetails?.interruption_stop ? valveDetails?.interruption_stop : '-'" readonly>
      </ion-input>
    </ion-item>

  </ion-card>
</ion-content>